<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SARS-CoV-2-host-genes</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="static/styles.css" />
    <link rel="icon" type="image/png" href="static/favicon.png" />
</head>

<body>
    <a href="https://github.com/NCBI-Codeathons/SARS-CoV-2-host-genes"><img width="149" height="149"
            src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149"
            class="attachment-full size-full" style="position: absolute; right: 0;" alt="Fork me on GitHub"
            data-recalc-dims="1" /></a>
    <h1 name="top">SARS-CoV-2-host-genes</h1>

    <div class="contents">
        <a href="#bedsection">BED Table</a>
        <a href="#domains">Domains FASTA</a>
        <a href="#protein">Proteins FASTA</a>
        <a href="#metadatasection">Metadata Table</a>
    </div>

    <h2 id="bedsection" class="bed-header">BED file</h2>
    <a class="back-to-top" href="#top">⬆ Back to Top</a>
    <table id="bed" class="display" style="width: 100%;">
        <thead>
            <tr>
                <th>Chromosome</th>
                <th>Chromosom Start (0 based)</th>
                <th>Chromosome End (non-inclusive)</th>
                <th>Name</th>
                <th>Score</th>
                <th>DNA Strand Orientation</th>
            </tr>
        </thead>
        <tbody class="bed-body">
            <!-- rows and columns from bed file are dynamically inserted here -->
        </tbody>
    </table>

    <h2 name="domains" id="domains">Protein Domains FASTA</h2>
    <a class="back-to-top" href="#top">⬆ Back to Top</a>
    <div class="domains-wrapper"></div>

    <h2 name="protein" id="protein">Protein FASTA</h2>
    <a class="back-to-top" href="#top">⬆ Back to Top</a>
    <div class="proteins-wrapper"></div>

    <h2 id="metadatasection" name="metadatasection">Metadata</h2>
    <a class="back-to-top" href="#top">⬆ Back to Top</a>

    <table id="metadata" class="display" style="width: 100%;">
        <thead>
            <tr>
                <th>Summary</th>
                <th>Symbol</th>
                <th>Aliases</th>
                <th>Description</th>
                <th>Type</th>
                <th>Publications</th>
            </tr>
        </thead>
        <tbody class="metadata-body">
            <!-- rows and columns from bed file are dynamically inserted here -->
        </tbody>
    </table>
</body>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="static/bed.js"></script>
<script src="static/metadata.js"></script>
<script src="static/domains.js"></script>
<script src="static/proteins.js"></script>
<script>
    //   BED TABLE
    let bed_split = bed.map((x) =>
        x.split(/(\s+)/).filter((e) => e.trim().length > 0)
    );
    // console.log(bed_split);

    let bedBody = $(".bed-body");

    for (const row of bed_split) {
        let trBed = $("<tr/>", { class: "bed-row" });
        bedBody.append(trBed);

        for (const col of row) {
            trBed.append(`<td>${col}</td>`);
        }
    }

    //   METADATA TABLE
    let metadata_split = metadata.map((x) =>
        x.split(/\s{2,}|\t/).filter((e) => e.trim().length > 0)
    );
    // console.log(metadata_split);

    let metadataBody = $(".metadata-body");

    for (const row of metadata_split) {
        let trMetadata = $("<tr/>", { class: "metadata-row" });
        metadataBody.append(trMetadata);

        for (const col of row) {
            trMetadata.append(`<td>${col}</td>`);
        }
    }

    // PROTEIN DOMAINS
    console.log(domains);
    let domainswrapper = $(".domains-wrapper");
    for (const [i, domain] of domains.entries()) {
        if (i % 2 === 0) {
            //odd
            domainswrapper.append(`<b>${domain}</b>`);
        } else if (i % 2 !== 0) {
            //even
            domainswrapper.append(`<p>${domain}</p>`);
        }
    }

    // PROTEINs
    console.log(proteins);
    let proteinsWrapper = $(".proteins-wrapper");
    for (const [i, protein] of proteins.entries()) {
        if (i % 2 === 0) {
            //odd
            proteinsWrapper.append(`<b>${protein}</b>`);
        } else if (i % 2 !== 0) {
            //even
            proteinsWrapper.append(`<p>${protein}</p>`);
        }
    }

    // INIT DATATABLES
    $(document).ready(function () {
        $("table.display").DataTable({ pageLength: 100 });
    });
</script>

</html>